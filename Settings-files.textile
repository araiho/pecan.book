{{toc}}

h1. Settings Files

* Example settings files:
** ED2
*** [[ED2IN]]
*** "example settings file":https://ebi-forecast.igb.illinois.edu/redmine/projects/pecan/wiki/Settings_Files#Example-file  
** SIPNET: source:all/inst/test.settings.xml
** c4photo: source:models/c4photo/inst/c4photo.xml

h2. Node definitions

==Settings File==
An example of a xml settings file can be found in template.settings.xml, under the PEcAn root folder.

The following is a list of commonly used tags within xml settings files.



|*node*| *definition*|
| *@<pfts>@* | precedes a list of pft |
| *@<pfts><pft>@* | defines a single pft |
| *@<pfts><pft><name>@* | The plant functional type that the meta-analysis will be performed on. A list of options may be found under the "name" column of the pfts table in the "Biofuel Ecophysioligical Traits and Yields database (BETYdb)":http:/ebi-forecast.igb.uiuc.edu/bety  |
| *@<pfts><pft><outdir>@* | The file path to which pft-specific output will be placed during meta-analysis and sensitivity analysis |
| *@<pfts><pft><contants>@* | ED specific. Xml that will appear within generated config files for that specific pft file. Parameters given a constant will be excluded from analyses.|
|&nbsp;||
| *@<meta.analysis><iter>@* | "MCMC":http:/en.wikipedia.org/wiki/Markov_chain_Monte_Carlo  chain length, i.e. the total number of posterior samples in the meta-analysis|
| *@<meta.analysis><random.effects>@* | TRUE/FALSE. Whether to include random effects (site, treatment) in meta-analysis model. Can be set to FALSE to work around convergence problems caused by  an over parameterized model (e.g. too many sites, not enough data)  |
| *@<ensemble><size>@* | The number of runs in the ensemble|
|&nbsp;||
|*@<pecanDir>@*| pecan package home directory.|
| *@<Rlibdir>@* | location of R pecan library|
| *@<outdir>@* | The folder to which output will be written.|
| *@<runnames>@*| currently supports  'prior' and posterior('post') runs listed in <runname> nodes.|
|&nbsp;||
| *@<sensitivity.analysis>@* | Either be empty or have <quantile> or <sigma> nodes. If neither are given, the default is to use the median +/- [1 2 3] x sigma (e.g. the  0.00135 0.0228 0.159 0.5 0.841 0.977 0.999 quantiles);  If the 0.5 (median) quantile is omitted, it will be added in the code. |
| *@<sensitivity.analysis><quantiles>@* | Quantiles of parameter distributions at whic which model should be evaluated when running sensitivity analysis. Values greater than 0 and less than 1 can be used.   |
| *@<sensitivity.analysis><sigma>@* | Any real number can be used to indicate the quantiles to be used in units of normal probability.  |
| *@<sensitivity.analysis><start.date>@* | YYYY/MM/DD format|
| *@<sensitivity.analysis><end.date>@* | YYYY/MM/DD format|
| *@<sensitivity.analysis><variable>@* | name of the variable the analysis should be run for |
|&nbsp;||
| *@<database>@* | |
| *@<database><userid>@* | database login |
| *@<database><passwd>@* | database password |
| *@<database><location>@* | database server (localhost for a the local machine)|
| *@<database><name>@* | name of the database |
|&nbsp;||
| *@<model>@* |  |
| *@<model><name>@* | name of the model |
| *@<model><binary>@* | path to the model executable |
| *@<model><id>@* | id in the models database table |
| *@<model><config.headers>@* | ED specific. Xml that will appear at the start of generated config files. |
| *@<model><edin>@* | template used to write ED2IN file|
| *@<model><veg>@* | location of VEG database|
| *@<model><soil>@* | location of soild database|
| *@<model><psscss>@* | location of site inforation|
| *@<model><inputs>@* | location of additional input files (e.g. data assimilation data)|
|&nbsp;||
| *@<run>@* | |
| *@<run><site>@* | |
| *@<run><site><name>@* | site name|
| *@<run><site><lat>@* | site latitude|
| *@<run><site><lon>@* | site longitude|
| *@<run><site><met>@* | location of met data header file |
| *@<run><start.date>@* | |
| *@<run><end.date>@* | |
| *@<run><host>@* | |
| *@<run><host><name>@* | name of host server where model is located  |
| *@<run><host><rundir>@* | directory including model executable|
| *@<run><host><outdir>@* | location of model output files|

h2. Example file

<pre>
<?xml version="1.0"?>
<pecan>
  <!-- directories -->
  <pecanDir>/home/pecan/pecan/</pecanDir>
  <Rlibdir>/home/pecan/lib/R/</Rlibdir>
  <outdir>/home/pecan/runs/PEcAn_4/</outdir>

  <!-- how to connect to pecan database -->
  <database>
    <name>bety</name>
    <userid>bety</userid>
    <passwd>bety</passwd>
    <location>localhost</location>
  </database>

  <!-- a list of pfts -->  
  <pfts>
    <pft>
      <name>temperate.Early_Hardwood</name>
      <outdir>/home/pecan/runs/PEcAn_4/pft/1/</outdir>
      <constants>
        <num>15</num>
        <!-- an example of how to overwrite traits -->
	<mort2>27.9</mort2>
	<Vm_low_temp>10.0</Vm_low_temp>
	<root_respiration_rate>3.76</root_respiration_rate>
	<seedling_mortality>0.97</seedling_mortality>
	<nonlocal_dispersal>0.214</nonlocal_dispersal>
	<stomatal_slope>3.45</stomatal_slope>
      </constants>
    </pft>
  </pfts>
  
  <!-- configuration of meta analysis phase in workflow -->
  <meta.analysis>
    <iter>50000</iter>
    <random.effects>TRUE</random.effects>
  </meta.analysis>
  
  <!-- number of runs to do -->
  <ensemble>
    <size>100</size>
  </ensemble>

  <!-- configuration of sensitivity phase in workflow -->
  <sensitivity.analysis>
    <quantiles>
      <quantile></quantile>
      <sigma>-3</sigma>
      <sigma>-2</sigma>
      <sigma>-1</sigma>
      <sigma>1</sigma>
      <sigma>2</sigma>
      <sigma>3</sigma>
    </quantiles>
    <start.year>2004</start.year>
    <end.year>2006</end.year>
  </sensitivity.analysis>

  <!-- configuration of data assimilation phase in workflow -->
  <data.assimilation>
    <nmcmc>1000</nmcmc>
  </data.assimilation>

  <!-- model specific information -->
  <model>
    <name>ED2</name>
    <binary>/usr/local/bin/ed.r82</binary>
    <id>7</id>
    <config.header>
      <radiation>
        <lai_min>0.01</lai_min>
      </radiation>
      <ed_misc>
        <output_month>12</output_month>      
      </ed_misc> 
    </config.header>
    <edin>/home/pecan/runs/PEcAn_4/ED2IN.template</edin>
    <veg>/home/pecan/oge2OLD/OGE2_</veg>
    <soil>/home/pecan/faoOLD/FAO_</soil>
    <psscss>/home/pecan/sites/niwot/</psscss>
    <inputs>/home/pecan/ed_inputs/</inputs>
    <phenol.scheme>0</phenol.scheme>
  </model>

  <!-- what site to run and where -->
  <run>
    <site>
      <id>772</id>
      <name>Niwot Ridge Forest/LTER NWT1 (US-NR1)</name>
      <lat>40.032900</lat>
      <lon>-105.546000</lon>
      <met>/home/pecan/sites/niwot/ED_MET_DRIVER_HEADER</met>
      <met.start>2006/06/01</met.start>
      <met.end>2006/07/31</met.end>
    </site>
    <start.date>2000/01/01</start.date>
    <end.date>2002/12/31</end.date>
    <host>
      <name>ebi-cluster.igb.uiuc.edu</name>
      <rundir>/home/dlebauer/EDBRAMS/ED/run/</rundir>
      <outdir>/home/scratch/dlebauer/pecan/RUNDIRNAME/out/</outdir>
    </host>
  </run>
</pecan>
</pre>